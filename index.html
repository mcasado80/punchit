<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0"
    />
    <meta
      name="description"
      content="A web-based beatmaker with a high-performance native audio engine, step sequencer, and two sample banks. Built with vanilla JavaScript and the Web Audio API."
    />
    <title>PunchiTouch</title>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />

    <!-- PWA & Mobile Web App Manifest -->
    <meta name="theme-color" content="#ff00ea" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="PunchiTouch" />
    <link rel="apple-touch-icon" href="/favicon.svg" />

    <!-- Modularized CSS -->
    <link rel="stylesheet" href="styles/base.css" />
    <link rel="stylesheet" href="styles/layout.css" />
    <link rel="stylesheet" href="styles/pads.css" />
    <link rel="stylesheet" href="styles/controls.css" />
    <link rel="stylesheet" href="styles/components.css" />
    <link rel="stylesheet" href="styles/animations.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap"
      rel="stylesheet"
    />
    <script type="module" src="native-audio-init.js"></script>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>PunchiTouch</h1>

        <div class="controls-section">
          <button
            id="loop-mode-btn"
            class="control-button"
            title="Toggle Loop Mode"
          ></button>

          <button
            id="bank-toggle-btn"
            class="control-button"
            title="Toggle Banks"
          ></button>

          <div class="loop-controls-container">
            <div class="knob-container">
              <div id="analog-knob" class="analog-knob control-button">
                <div class="knob-indicator"></div>
                <span id="bpm-value">120</span>
              </div>
              <input
                type="range"
                id="bpm-slider"
                class="knob-hidden"
                min="60"
                max="180"
                value="120"
              />
            </div>
            <button
              id="beat-length-btn"
              class="control-button"
              title="Toggle Beat Length (4/8/16)"
            ></button>
            <button
              id="stop-all-loops-btn"
              class="control-button"
              title="Stop"
            ></button>
          </div>
        </div>
      </header>

      <main class="app">
        <div class="pads-container"></div>
        <div class="beatbox-pads-container" style="display: none"></div>
      </main>
    </div>

    <div id="beatbox-modal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <div class="file-input-container">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path
              d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
            ></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <circle cx="11" cy="16" r="2"></circle>
            <path d="M13 16v-4a2 2 0 0 1 2-2h0a2 2 0 0 1 2 2v2"></path>
          </svg>
          <input type="file" id="audio-file-input" accept=".wav,.mp3,.ogg" />
        </div>
        <div class="modal-buttons">
          <button
            id="record-toggle-btn"
            class="control-button"
            title="Rec / Stop"
          >
            <div class="record-indicator"></div>
          </button>
          <button
            id="delete-sample-btn"
            class="control-button"
            title="Delete Sample"
          ></button>
        </div>
      </div>
    </div>

    <script type="module" src="/script.js"></script>
  </body>
</html>
